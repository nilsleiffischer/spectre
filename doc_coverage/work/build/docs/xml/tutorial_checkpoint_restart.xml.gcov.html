<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>LCOV - e4dad5ca548275436386ab6982b6cf2ce80879f5 - /work/build/docs/xml/tutorial_checkpoint_restart.xml</title>
  <link rel="stylesheet" type="text/css" href="../../../../gcov.css">
</head>

<body>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="title"> SpECTRE Documentation Coverage Report</td></tr>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>

    <tr>
      <td width="100%">
        <table cellpadding=1 border=0 width="100%">
          <tr>
            <td width="10%" class="headerItem">Current view:</td>
            <td width="35%" class="headerValue"><a href="../../../../index.html">top level</a> - <a href="index.html">work/build/docs/xml</a> - tutorial_checkpoint_restart.xml</td>
            <td width="5%"></td>
            <td width="15%"></td>
            <td width="10%" class="headerCovTableHead">Hit</td>
            <td width="10%" class="headerCovTableHead">Total</td>
            <td width="15%" class="headerCovTableHead">Coverage</td>
          </tr>
          <tr>
             <td class="headerItem">Commit:</td>
             <td class="headerValue"><a target="_blank" href="https://github.com/sxs-collaboration/spectre/commit/e4dad5ca548275436386ab6982b6cf2ce80879f5">e4dad5ca548275436386ab6982b6cf2ce80879f5</a></td>
            <td></td>
            <td class="headerItem">Lines:</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntry">1</td>
            <td class="headerCovTableEntryHi">100.0 %</td>
          </tr>
          <tr>
            <td class="headerItem">Date:</td>
            <td class="headerValue">2021-07-21 18:28:26</td>
            <td></td>
          </tr>
          <tr>
            <td class="headerItem">Legend:</td>
            <td class="headerValueLeg">            Lines:
            <span class="coverLegendCov">hit</span>
            <span class="coverLegendNoCov">not hit</span>
</td>
            <td></td>
          </tr>
          <tr><td><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
        </table>
      </td>
    </tr>

    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
  </table>

  <table cellpadding=0 cellspacing=0 border=0>
    <tr>
      <td><br></td>
    </tr>
    <tr>
      <td>
<pre class="sourceHeading">          Line data    Source code</pre>
<pre class="source">
<a name="1"><span class="lineNum">       1 </span><span class="lineCov">          1 : &lt;?xml version='1.0' encoding='UTF-8' standalone='no'?&gt;</span></a>
<a name="2"><span class="lineNum">       2 </span>            : &lt;doxygen xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;compound.xsd&quot; version=&quot;1.8.17&quot;&gt;</a>
<a name="3"><span class="lineNum">       3 </span>            :   &lt;compounddef id=&quot;tutorial_checkpoint_restart&quot; kind=&quot;page&quot;&gt;</a>
<a name="4"><span class="lineNum">       4 </span>            :     &lt;compoundname&gt;tutorial_checkpoint_restart&lt;/compoundname&gt;</a>
<a name="5"><span class="lineNum">       5 </span>            :     &lt;title&gt;Setting up checkpoints and restarts&lt;/title&gt;</a>
<a name="6"><span class="lineNum">       6 </span>            :     &lt;briefdescription&gt;</a>
<a name="7"><span class="lineNum">       7 </span>            :     &lt;/briefdescription&gt;</a>
<a name="8"><span class="lineNum">       8 </span>            :     &lt;detaileddescription&gt;</a>
<a name="9"><span class="lineNum">       9 </span>            : &lt;para&gt;SpECTRE executables can write checkpoints that save their instantaneous state to disc; the execution can be restarted later from a saved checkpoint. This feature is useful for expensive simulations that would run longer than the wallclock limits on a supercomputer system.&lt;/para&gt;</a>
<a name="10"><span class="lineNum">      10 </span>            : &lt;para&gt;Executables can checkpoint when:&lt;orderedlist&gt;</a>
<a name="11"><span class="lineNum">      11 </span>            : &lt;listitem&gt;&lt;para&gt;The &lt;computeroutput&gt;Phase&lt;/computeroutput&gt; enumeration in the &lt;computeroutput&gt;Metavariables&lt;/computeroutput&gt; has a &lt;computeroutput&gt;WriteCheckpoint&lt;/computeroutput&gt; phase.&lt;/para&gt;</a>
<a name="12"><span class="lineNum">      12 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;The &lt;computeroutput&gt;WriteCheckpoint&lt;/computeroutput&gt; phase is run by a &lt;computeroutput&gt;&lt;ref refid=&quot;namespacePhaseControl&quot; kindref=&quot;compound&quot;&gt;PhaseControl&lt;/ref&gt;&lt;/computeroutput&gt; specified in the &lt;computeroutput&gt;Metavariables&lt;/computeroutput&gt; and the input file. The two supported ways of running the checkpoint phase are:&lt;itemizedlist&gt;</a>
<a name="13"><span class="lineNum">      13 </span>            : &lt;listitem&gt;&lt;para&gt;with &lt;computeroutput&gt;&lt;ref refid=&quot;structCheckpointAndExitAfterWallclock&quot; kindref=&quot;compound&quot;&gt;CheckpointAndExitAfterWallclock&lt;/ref&gt;&lt;/computeroutput&gt;. This is the recommended phase control for checkpointing, because it writes only one checkpoint before cleanly terminating the code. This reduces the disc space taken up by checkpoint files and stops using up the allocation&amp;apos;s CPU-hours on work that would be redone anyway after the run is restarted.&lt;/para&gt;</a>
<a name="14"><span class="lineNum">      14 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;using &lt;computeroutput&gt;&lt;ref refid=&quot;structVisitAndReturn&quot; kindref=&quot;compound&quot;&gt;VisitAndReturn(WriteCheckpoint)&lt;/ref&gt;&lt;/computeroutput&gt;. This is useful for writing more frequent checkpoint files, which could help when debugging a run by restarting it from just before the failure.&lt;/para&gt;</a>
<a name="15"><span class="lineNum">      15 </span>            : &lt;/listitem&gt;&lt;/itemizedlist&gt;</a>
<a name="16"><span class="lineNum">      16 </span>            : &lt;/para&gt;</a>
<a name="17"><span class="lineNum">      17 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="18"><span class="lineNum">      18 </span>            : &lt;/para&gt;</a>
<a name="19"><span class="lineNum">      19 </span>            : &lt;para&gt;To restart an executable from a checkpoint file, run a command like this: &lt;programlisting&gt;&lt;codeline&gt;&lt;highlight class=&quot;normal&quot;&gt;./MySpectreExecutable&lt;sp/&gt;+restart&lt;sp/&gt;SpectreCheckpoint000123&lt;/highlight&gt;&lt;/codeline&gt;</a>
<a name="20"><span class="lineNum">      20 </span>            : &lt;/programlisting&gt;&lt;/para&gt;</a>
<a name="21"><span class="lineNum">      21 </span>            : &lt;para&gt;where the &lt;computeroutput&gt;000123&lt;/computeroutput&gt; should be the number of the checkpoint to restart from.&lt;/para&gt;</a>
<a name="22"><span class="lineNum">      22 </span>            : &lt;para&gt;There are a number of caveats in the current implementation of checkpointing and restarting:&lt;/para&gt;</a>
<a name="23"><span class="lineNum">      23 </span>            : &lt;para&gt;&lt;orderedlist&gt;</a>
<a name="24"><span class="lineNum">      24 </span>            : &lt;listitem&gt;&lt;para&gt;The same binary must be used when writing the checkpoint and when restarting from the checkpoint. If a different binary is used to restart the code, there are no guarantees that the code will restart or that the continued execution will be correct.&lt;/para&gt;</a>
<a name="25"><span class="lineNum">      25 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;The code must be restarted on the same hardware configuration used when writing the checkpoint &lt;mdash/&gt; this means the same number of nodes with the same number of processors per node.&lt;/para&gt;</a>
<a name="26"><span class="lineNum">      26 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;Currently, there is no support for modifying any parameters during a restart. The restart only extends a simulation&amp;apos;s runtime beyond wallclock limits.&lt;/para&gt;</a>
<a name="27"><span class="lineNum">      27 </span>            : &lt;/listitem&gt;&lt;listitem&gt;&lt;para&gt;When using &lt;computeroutput&gt;&lt;ref refid=&quot;structCheckpointAndExitAfterWallclock&quot; kindref=&quot;compound&quot;&gt;CheckpointAndExitAfterWallclock&lt;/ref&gt;&lt;/computeroutput&gt; to trigger checkpoints, note that the elapsed wallclock time is checked only when the &lt;computeroutput&gt;&lt;ref refid=&quot;namespacePhaseControl&quot; kindref=&quot;compound&quot;&gt;PhaseControl&lt;/ref&gt;&lt;/computeroutput&gt; is run, i.e., at global synchronization points defined in the input file. This means that to write a checkpoint in the 30 minutes before the end of a job&amp;apos;s queue time, the triggers in the input file must trigger global synchronizations at least once every 30 minutes (and probably 2-3 times so there is a margin for the time to write files to disc, etc). It is currently up to the user to find the balance between too-frequent synchronizations (that slow the code) and too-infrequent synchronizations (that won&amp;apos;t allow checkpoints to be written). &lt;/para&gt;</a>
<a name="28"><span class="lineNum">      28 </span>            : &lt;/listitem&gt;&lt;/orderedlist&gt;</a>
<a name="29"><span class="lineNum">      29 </span>            : &lt;/para&gt;</a>
<a name="30"><span class="lineNum">      30 </span>            :     &lt;/detaileddescription&gt;</a>
<a name="31"><span class="lineNum">      31 </span>            :   &lt;/compounddef&gt;</a>
<a name="32"><span class="lineNum">      32 </span>            : &lt;/doxygen&gt;</a>
</pre>
      </td>
    </tr>
  </table>
  <br>

  <table width="100%" border=0 cellspacing=0 cellpadding=0>
    <tr><td class="ruler"><img src="../../../../glass.png" width=3 height=3 alt=""></td></tr>
    <tr><td class="versionInfo">Generated by: <a href="http://ltp.sourceforge.net/coverage/lcov.php" target="_parent">LCOV version 1.14</a></td></tr>
  </table>
  <br>

</body>
</html>
